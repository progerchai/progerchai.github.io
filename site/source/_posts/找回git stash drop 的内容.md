---
title: æ‰¾å›git stash drop çš„å†…å®¹
date: 2022-06-27 20:46:50
tags: [git]
keywords: [git]
---


# æ‰¾å›git stash drop çš„å†…å®¹

> èƒŒæ™¯ï¼šå¹³æ—¶å¼€å‘åœ¨åŒä¸€ä¸ªé¡¹ç›®è¿›è¡Œå¤šä»¶äº‹çš„æ—¶å€™ï¼Œç»å¸¸ä¼šç”¨åˆ°stash çš„åŠŸèƒ½ã€‚å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªåŠŸèƒ½ï¼Œä½†æ˜¯çªç„¶æœ‰ä¸€ä¸ªhotfixï¼Œç„¶è€Œä½ æ­£åœ¨å¼€å‘çš„ä¸œè¥¿å¯èƒ½å¾ˆä¸å®Œå–„ï¼Œä½ ä¸æƒ³ç›´æ¥è¿›è¡Œcommitã€‚é‚£ä¹ˆè¿™ä¸ªæ—¶å€™ä½ ä¼šç”¨stash æŠŠä¿®æ”¹æš‚å­˜åˆ°æœ¬åœ°ï¼Œç„¶åcheckou åˆ°hotfixåˆ†æ”¯ï¼Œæå®Œåå†åˆ‡å›æ¥ï¼Œç„¶åæŠŠæš‚å­˜çš„ä»£ç æ¢å¤ç»§ç»­å¼€å‘
> 

ä»Šå¤©å¼€å‘çš„æ—¶å€™ï¼Œå°±æ˜¯ç±»ä¼¼æƒ…å†µï¼Œæˆ‘å°†æœ¬åœ°æ­£åœ¨å¼€å‘çš„ä»£ç stash äº†ä¹‹åï¼Œåˆ‡åˆ°hotfixåˆ†æ”¯è¿›è¡Œé—®é¢˜ä¿®å¤ã€‚ä¿®å¤å®Œäº†ä¹‹åæˆ‘çš„git æ“ä½œå‘½ä»¤å¦‚ä¸‹ï¼š

```bash
# ç¬¬ä¸€æ­¥
git stash list
#stash@{0}: WIP on mall_suggest_sort_zhaoqing: 59e4a59 ğŸš€ ä»£ç ä¼˜åŒ–
#stash@{1}: WIP on workflow: c13a9a1 fix: date range format

# ç¬¬äºŒæ­¥
git stash drop stash@{1}
```

å‡è®¾`stash@{1}`æ˜¯æˆ‘è¦æ¢å¤çš„ä»£ç ï¼Œæˆ‘æœ¬æ„æ˜¯æƒ³é€šè¿‡`git stash apply stash@{1}`çš„æ–¹å¼æ¢å¤çš„ï¼Œä½†æ˜¯è®°é”™äº†å‘½ä»¤ï¼Œç”¨äº†`git stash drop stash@{1}` æŠŠæˆ‘è¦æ¢å¤çš„ä»£ç è®°å½•ç»™åˆ æ‰äº†ã€‚å›è½¦ä¸‹å»å°±ååˆ†åæ‚”ï¼Œæˆ‘å¿ƒæƒ³å®Œäº†ï¼Œä¸‹åˆå¯èƒ½è¦ç™½å¹²äº†ã€‚

---

æˆ‘é©¬ä¸Šæœäº†ä¸€ä¸‹å¦‚ä½•æ¢å¤drop çš„stash è®°å½•ï¼Œæœç„¶æœ‰åŠæ³•

```bash
# ç¬¬ä¸€æ­¥ï¼Œæ‰¾åˆ°æ‰€æœ‰çš„ dangling commit è®°å½•
git fsck --lost-found
#Checking object directories: 100% (256/256), done.
#Checking objects: 100% (5011/5011), done.
#dangling blob 4c434308ab9b25822e4679d32012ab39556f3811
#dangling commit d10522121aee9bb28f486e98021b2fc41925ea11
#dangling commit 3248ddbdd34d337f45f87de62c98cfc72b3d8411
#dangling commit 8148f7d08ee368fda6c481c178c37e9c506c2311
#dangling commit 28ca57bc6163db716223565ed321a5eafe54ca11

# ç¬¬äºŒæ­¥ï¼Œ æŸ¥çœ‹commit çš„å…·ä½“ä¿¡æ¯ï¼Œä¾‹å¦‚æ—¶é—´ã€ä½œè€…ç­‰
git show d10522121aee9bb28f486e98021b2fc41925ea11
#commit d10522121aee9bb28f486e98021b2fc41925ea11
#Merge: 7c22548 778925e
#Author: xx <xx.xx@xx-inc.com>
#Date:   Tue Jun 27 17:32:36 2022 +0800

# ç¬¬ä¸‰æ­¥ï¼Œæ¢å¤
git stash apply d10522121aee9bb28f486e98021b2fc41925ea11
```

è¿™é‡Œæœ‰ä¸¤ä¸ªæ³¨æ„ç‚¹ï¼Œç¬¬ä¸€ä¸ªæ˜¯`git fsck --lost-found` è¿”å›çš„ç»“æœåˆ—è¡¨ä¸­ï¼Œå¹¶ä¸æ˜¯æœ‰é¡ºåºçš„ï¼Œæ‰€ä»¥ä½ å¯èƒ½éœ€è¦å¤šshow å‡ æ¡ï¼Œæ‰èƒ½æ‰¾åˆ°ä½ æƒ³æ¢å¤çš„é‚£æ¡æ•°æ®ã€‚æˆ‘è¿™é‡Œæ­£å·§å½“å¤©åªæœ‰ä¸€ä¸ªcommit ï¼Œæ‰€ä»¥æ¯”è¾ƒå¿«çš„å°±æ‰¾åˆ°äº†ã€‚

ç¬¬äºŒä¸ªæ³¨æ„ç‚¹æ˜¯ï¼Œåªèƒ½æ¢å¤commit çš„danglingè®°å½•ï¼Œå¦‚æœæ˜¯blobç±»å‹çš„ï¼Œå¯ä»¥é€šè¿‡show æŸ¥çœ‹ï¼Œä½†æ˜¯æ— æ³•ç›´æ¥applyæ¢å¤å›æ¥ã€‚

 è¿™æ¬¡è¿‡åï¼Œæˆ‘è¦ç»å¸¸commit äº†ï¼Œå‘œå‘œã€‚


 ---

> æ„Ÿè°¢é˜…è¯»,å‹˜è¯¯ã€çº é”™æˆ–å…¶ä»–è¯·è”ç³»progerchai@gmail.com,æˆ–è€…[ç‚¹å‡»è¿™é‡Œ](https://github.com/progerchai/progerchai.github.io/issues/new)æ issue ç»™æˆ‘
> æ¬¢è¿äº¤æµ ğŸ‘,ä½ çš„æ¯ä¸€æ¬¡æŒ‡å¯¼éƒ½å¯ä»¥è®©æˆ‘è¿›æ­¥
